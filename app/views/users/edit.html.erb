<!-- Page Wrapper -->
<div id="wrapper">
    <!-- Sidebar -->
    <%= render "shared/sidebar", active: 0 %>
    <!-- End of Sidebar -->


    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">
            <!-- Topbar -->
            <%= render "shared/navbar", title: 'Edit Profile' %>
            <!-- End of Topbar -->


            <!-- Begin Page Content -->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-8">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card shadow mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-primary">Personal Info</h6>
                                    </div>
                                    <div class="card-body">
                                        <%= form_for current_user, :html => {:class => 'user'}  do |f| %>

                                        <% if current_user.errors.any? %>
                                        <div id="error_explanation">
                                            <!--
                                          <h2>
                                            <%= pluralize(@task.errors.count, "error") %> prohibited this task from
                                            being saved:
                                          </h2>
                                          -->
                                            <ul>
                                                <% current_user.errors.full_messages.each do |msg| %>
                                                <li class="alert alert-danger" role="alert">
                                                    <%= msg %>
                                                </li>
                                                <% end %>
                                            </ul>
                                        </div>
                                        <% end %>

                                        <div class="row">
                                            <div class="col-sm-6 mb-3 mb-sm-0">
                                                <%= form_group_for f, :first_name, label: false  do %>
                                                <%= f.label :first_name %><br />
                                                <%= f.text_field :first_name, class: 'form-control form-control-user', placeholder: "First Name"%>
                                                <%end%>
                                            </div>
                                            <div class="col-sm-6">
                                                <%= form_group_for f, :surname, label: false  do %>
                                                <%= f.label :surname %><br />
                                                <%= f.text_field :surname, class: 'form-control form-control-user', placeholder: "Last Name"%>
                                                <%end%>
                                            </div>
                                        </div>
                                        <%= form_group_for f, :username, label: false  do %>
                                        <%= f.label :username %><br />
                                        <%= f.text_field :username, class: 'form-control form-control-user', placeholder: "Username"%>
                                        <%end%>
                                        <%= form_group_for f, :email, label: false  do %>
                                        <%= f.label :email %><br />
                                        <%= f.text_field :email, class: 'form-control form-control-user', placeholder: "Email Address", :disabled => true %>
                                        <%end%>
                                        <br>
                                        <%= f.submit 'Edit account', :class => 'mt-2 d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm' %>
                                        <%end%>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card shadow mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-primary">Security</h6>
                                    </div>
                                    <div class="card-body">
                                        <%= form_for current_user,  url: update_password_users_path, :html => {:class => 'user'}  do |f| %>

                                        <% if current_user.errors.any? %>
                                        <div id="error_explanation">
                                            <!--
                                          <h2>
                                            <%= pluralize(@task.errors.count, "error") %> prohibited this task from
                                            being saved:
                                          </h2>
                                          -->
                                            <ul>
                                                <% current_user.errors.full_messages.each do |msg| %>
                                                <li class="alert alert-danger" role="alert">
                                                    <%= msg %>
                                                </li>
                                                <% end %>
                                            </ul>
                                        </div>
                                        <% end %>

                                        <p class="py-0" style="font-size: 1em;"> Changing your password will sign you
                                            out of all your devices. You will need to enter your new password on all
                                            your devices</p>


                                        <div class="col-sm-6 pl-0">
                                            <%= form_group_for f, :password, label: false  do %>
                                            <%= f.label :password %><br />
                                            <%= f.password_field :password, class: 'form-control form-control-user', placeholder: "New password"%>
                                            <%end%>
                                        </div>
                                        <p class="py-0" style="font-size: 0.85em;">Password should be strong: at least 8
                                            chars, with at least 1 uppercase, 1 lowercase and 1 special char</p>
                                        <div class="col-sm-6 pl-0">
                                            <%= form_group_for f, :password_confirmation, label: false  do %>
                                            <%= f.label :password_confirmation %><br />
                                            <%= f.text_field :password_confirmation, class: 'form-control form-control-user', placeholder: "Confirm new password"%>
                                            <%end%>
                                        </div>
                                        <br>
                                        <%= f.submit 'Update password', :class => 'mt-2 d-sm-inline-block btn btn-sm btn-primary shadow-sm' %>
                                        <% end %>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card shadow mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-danger">Danger zone</h6>
                                    </div>
                                    <div class="card-body">
                                        Deleting your account will permanently remove all your information from our
                                        database.
                                        This cannot be undone.
                                        <br>
                                        <%= link_to 'Delete account',  user_path(current_user), method:
                                        :delete, class: "mt-2 d-sm-inline-block btn btn-sm btn-danger shadow-sm",  id: "user_account_delete",  data: { confirm: 'Are you sure?' } %>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                    </div>
                </div>
            </div>

            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Web Systems Development 2020</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->
        </div>
        <!-- End of Content Wrapper -->
    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- New Task Modal -->
    <div class="modal" id="modal-form-task" tabindex="-1" role="dialog" aria-labelledby="modalNewTaskTitle"
        aria-hidden="true">
    </div>

    <!-- New Project Modal -->
    <div class="modal" id="modal-form-project" tabindex="-1" role="dialog" aria-labelledby="modalNewProjectTitle"
        aria-hidden="true">
    </div>




    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">
                    Select "Logout" below if you are ready to end your current session.
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">
                        Cancel
                    </button>
                    <%= link_to 'Logout', logout_path(current_user), method: :post,
          class: "btn btn-primary",  id: "user_logout_modal" %>
                </div>
            </div>
        </div>
    </div>